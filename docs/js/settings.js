/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/settings.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/settings.ts":
/*!*************************!*\
  !*** ./src/settings.ts ***!
  \*************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _trello_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./trello-util */ \"./src/trello-util.ts\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util */ \"./src/util.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst t = TrelloPowerUp.iframe();\n\n\nlet lists = [];\nconst START_SELECT = '.start-select';\nconst END_SELECT = '.end-select';\nconst HOURS_INPUT = '.hours-input';\nconst MINUTES_INPUT = '.minutes-input';\nconst NAME_INPUT = '.name-input';\nconst stringToNode = (domString) => {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = domString;\n    return wrapper.firstChild;\n};\nconst columnIdToName = (id) => {\n    const list = lists.find(list => list.id === id);\n    return list.name;\n};\nconst createOptionsForNewRow = (isStart) => isStart ? createOptions(lists[0].id, lists[1].id) : createOptions(lists[1].id, lists[0].id);\nconst createOptions = (currentValue, filteredValue) => {\n    const options = [];\n    lists.forEach(list => {\n        if (list.id !== filteredValue) {\n            let option = document.createElement('option');\n            option.setAttribute('value', list.id);\n            option.appendChild(document.createTextNode(list.name));\n            if (list.id === currentValue) {\n                option.selected = true;\n            }\n            options.push(option);\n        }\n    });\n    return options;\n};\nconst getConfigString = (config, withRowDiv = true) => `${withRowDiv ? '<div class=\"row clickable\">' : ''}\n      <div class=\"col0\">${config.name}</div>\n      <div class=\"col1\">\n        <span class=\"condition-type\">Start when card is in list</span>\n        <br>${columnIdToName(config.startCondition.id)}\n        <br><span class=\"condition-type\">Ends when card is in list</span>\n        <br>${columnIdToName(config.endCondition.id)}\n      </div>\n      <div class=\"col2\">Duration: ${Object(_util__WEBPACK_IMPORTED_MODULE_1__[\"getHumanReadableTime\"])(config.time)}</div>\n      <div class=\"col3\"><button id=\"delete-btn\" class=\"mod-bottom\">Delete</button></div>\n  ${withRowDiv ? '</div>' : ''}`;\nconst renderConfig = (config, withRowDiv = true) => stringToNode(getConfigString(config, withRowDiv));\nconst getConfigEditMode = (config) => {\n    const domString = `\n    <div class=\"col0\">\n      <input class=\"name-input\" value=${config ? `\"${config.name}\"` : \"SLA Name\"}></input>\n    </div>\n    <div class=\"col1\">\n      <span class=\"condition-type\">Start when card is in list</span>\n      <br><select class=\"start-select\"></select>\n      <br><span class=\"condition-type\">End when card is in list</span>\n      <br><select class=\"end-select\"></select>\n    </div>\n    <div class=\"col2\">\n      <input class=\"hours-input\" type=\"number\" min=\"0\" oninput=\"validity.valid||(value='')\" value=\"${config ? Math.floor(config.time / 60) : 1}\"></input><span>h</span>\n      <input class=\"minutes-input\" type=\"number\" min=\"0\" oninput=\"validity.valid||(value='')\" value=\"${config ? config.time - Math.floor(config.time / 60) * 60 : 30}\"></input><span>min</span>\n    </div>\n    <div class=\"col3\">\n        <button id=\"save-btn\" class=\"mod-primary mod-bottom\">Save</button>\n        <button id=\"cancel-btn\" class=\"mod-bottom\">Cancel</button>\n    </div>`;\n    return domString;\n};\nconst renderAddRow = (withRowDiv = true) => stringToNode(getAddRowString(withRowDiv));\nconst getAddRowString = (withRowDiv = true) => `${withRowDiv ? '<div class=\"row clickable\">' : ''}\n  <div class=\"add-row\">\n  Add SLA\n  </div>\n  ${withRowDiv ? '</div>' : ''}`;\nfunction onSave(e) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rowDiv = this.parentElement.parentElement;\n        const index = [...rowDiv.parentElement.children].indexOf(rowDiv);\n        const start = rowDiv.querySelector(START_SELECT).selectedOptions[0].value;\n        const end = rowDiv.querySelector(END_SELECT).selectedOptions[0].value;\n        const hours = rowDiv.querySelector(HOURS_INPUT).value || 0;\n        const minutes = rowDiv.querySelector(MINUTES_INPUT).value || 0;\n        const name = rowDiv.querySelector(NAME_INPUT).value || '';\n        const time = parseInt(hours, 10) * 60 + parseInt(minutes, 10);\n        const configs = (yield Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"getConfigurations\"])(t)) || [];\n        let newRow = false;\n        if (index > configs.length - 1) {\n            newRow = true;\n        }\n        if (newRow) {\n            const row = {\n                id: '1',\n                startCondition: {\n                    type: _trello_util__WEBPACK_IMPORTED_MODULE_0__[\"Condition\"].ColumnName,\n                    id: start\n                },\n                endCondition: {\n                    type: _trello_util__WEBPACK_IMPORTED_MODULE_0__[\"Condition\"].ColumnName,\n                    id: end,\n                },\n                time,\n                name,\n            };\n            configs.push(row);\n        }\n        else {\n            configs[index].startCondition.id = start;\n            configs[index].endCondition.id = end;\n            configs[index].time = time;\n            configs[index].name = name;\n        }\n        yield Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"setConfigurations\"])(t, configs);\n        // TODO: need to loop through SLAs and reset ones that have changed\n    });\n}\nfunction onCancel(e) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rowDiv = this.parentElement.parentElement;\n        const index = [...rowDiv.parentElement.children].indexOf(rowDiv);\n        const configs = (yield Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"getConfigurations\"])(t)) || [];\n        rowDiv.classList.remove('editing');\n        if (index > configs.length - 1) {\n            rowDiv.innerHTML = getAddRowString(false);\n        }\n        else {\n            rowDiv.innerHTML = getConfigString(configs[index], false);\n        }\n        // Unfreeze all rows and delete btns\n        const allRows = rowDiv.parentElement.children;\n        [].forEach.call(allRows, function (row) {\n            row.classList.add('clickable');\n        });\n        const allDeleteBtns = document.querySelectorAll('#delete-btn');\n        [].forEach.call(allDeleteBtns, function (btn) {\n            btn.disabled = false;\n        });\n    });\n}\nfunction onDelete(e) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rowDiv = this.parentElement.parentElement;\n        const index = [...rowDiv.parentElement.children].indexOf(rowDiv);\n        const configs = (yield Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"getConfigurations\"])(t)) || [];\n        configs.splice(index);\n        yield Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"setConfigurations\"])(t, configs);\n    });\n}\nfunction onSelectOptionChange(isStart) {\n    return function fn(e) {\n        const rowDiv = this.parentElement.parentElement;\n        const select = isStart ? rowDiv.querySelector(END_SELECT) : rowDiv.querySelector(START_SELECT);\n        const options = createOptions(select.selectedOptions[0].value, this.selectedOptions[0].value);\n        select.innerHTML = undefined;\n        options.forEach(option => {\n            select.appendChild(option);\n        });\n    };\n}\nfunction onRowClick(e) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!this.classList.contains('clickable')) {\n            return;\n        }\n        // Freeze all other rows and delete btns\n        this.classList.add('editing');\n        const allRows = this.parentElement.children;\n        [].forEach.call(allRows, function (row) {\n            row.classList.remove('clickable');\n        });\n        const allDeleteBtns = document.querySelectorAll('#delete-btn');\n        [].forEach.call(allDeleteBtns, function (btn) {\n            btn.disabled = true;\n        });\n        const index = [...this.parentElement.children].indexOf(this);\n        const configs = (yield Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"getConfigurations\"])(t)) || [];\n        let newRow = false;\n        if (index > configs.length - 1) {\n            newRow = true;\n        }\n        const config = newRow ? undefined : configs[index];\n        this.innerHTML = getConfigEditMode(config);\n        const startOptions = newRow ? createOptionsForNewRow(true) : createOptions(config.startCondition.id, config.endCondition.id);\n        const endOptions = newRow ? createOptionsForNewRow(false) : createOptions(config.endCondition.id, config.startCondition.id);\n        const startSelect = this.querySelector(START_SELECT);\n        const endSelect = this.querySelector(END_SELECT);\n        // If change option, need to make sure that the option is not present in the other select\n        startSelect.addEventListener(\"change\", onSelectOptionChange(true));\n        endSelect.addEventListener(\"change\", onSelectOptionChange(false));\n        this.querySelector('#save-btn').onclick = onSave;\n        this.querySelector('#cancel-btn').onclick = onCancel;\n        startOptions.forEach(option => {\n            startSelect.appendChild(option);\n        });\n        endOptions.forEach(option => {\n            endSelect.appendChild(option);\n        });\n    });\n}\nt.render(function () {\n    return __awaiter(this, void 0, void 0, function* () {\n        lists = yield Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"getLists\"])(t);\n        // TODO: If only one or 0 lists, can't do anything.\n        // TODO: If no auth, show auth screen\n        const configs = (yield Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"getConfigurations\"])(t)) || [];\n        const container = document.getElementById('container');\n        container.innerHTML = '';\n        configs.forEach((config) => {\n            container.appendChild(renderConfig(config));\n        });\n        container.appendChild(renderAddRow());\n        const rows = document.querySelectorAll('.row');\n        Array.from(rows).forEach(row => row.onclick = onRowClick);\n        const deleteButtons = document.querySelectorAll('#delete-btn');\n        Array.from(deleteButtons).forEach(btn => btn.onclick = onDelete);\n        t.sizeTo(document.getElementById('wrapper'));\n    });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2V0dGluZ3MudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3NldHRpbmdzLnRzP2MxNWYiXSwic291cmNlc0NvbnRlbnQiOlsiZGVjbGFyZSBjb25zdCBUcmVsbG9Qb3dlclVwOiBhbnk7XG5jb25zdCB0ID0gVHJlbGxvUG93ZXJVcC5pZnJhbWUoKTtcblxuaW1wb3J0IHsgZ2V0Q29uZmlndXJhdGlvbnMsIHNldENvbmZpZ3VyYXRpb25zLCBTbGFDb25maWd1cmF0aW9uLCBDb25kaXRpb24sIGdldExpc3RzIH0gZnJvbSAnLi90cmVsbG8tdXRpbCc7XG5pbXBvcnQgeyBnZXRIdW1hblJlYWRhYmxlVGltZSB9IGZyb20gJy4vdXRpbCc7XG5cbmxldCBsaXN0cyA9IFtdO1xuXG5jb25zdCBTVEFSVF9TRUxFQ1QgPSAnLnN0YXJ0LXNlbGVjdCc7XG5jb25zdCBFTkRfU0VMRUNUID0gJy5lbmQtc2VsZWN0JztcbmNvbnN0IEhPVVJTX0lOUFVUID0gJy5ob3Vycy1pbnB1dCc7XG5jb25zdCBNSU5VVEVTX0lOUFVUID0gJy5taW51dGVzLWlucHV0J1xuY29uc3QgTkFNRV9JTlBVVCA9ICcubmFtZS1pbnB1dCc7XG5cbmNvbnN0IHN0cmluZ1RvTm9kZSA9IChkb21TdHJpbmc6IHN0cmluZyk6IE5vZGUgPT4ge1xuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHdyYXBwZXIuaW5uZXJIVE1MID0gZG9tU3RyaW5nO1xuICByZXR1cm4gd3JhcHBlci5maXJzdENoaWxkO1xufTtcblxuY29uc3QgY29sdW1uSWRUb05hbWUgPSAoaWQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGxpc3QgPSBsaXN0cy5maW5kKGxpc3QgPT4gbGlzdC5pZCA9PT0gaWQpO1xuICByZXR1cm4gbGlzdC5uYW1lO1xufVxuXG5jb25zdCBjcmVhdGVPcHRpb25zRm9yTmV3Um93ID0gKGlzU3RhcnQ6IGJvb2xlYW4pOiBFbGVtZW50W10gPT5cbiAgaXNTdGFydCA/IGNyZWF0ZU9wdGlvbnMobGlzdHNbMF0uaWQsIGxpc3RzWzFdLmlkKSA6IGNyZWF0ZU9wdGlvbnMobGlzdHNbMV0uaWQsIGxpc3RzWzBdLmlkKTtcblxuY29uc3QgY3JlYXRlT3B0aW9ucyA9IChjdXJyZW50VmFsdWU6IHN0cmluZywgZmlsdGVyZWRWYWx1ZTogc3RyaW5nKTogRWxlbWVudFtdID0+IHtcbiAgY29uc3Qgb3B0aW9ucyA9IFtdO1xuICBsaXN0cy5mb3JFYWNoKGxpc3QgPT4ge1xuICAgIGlmIChsaXN0LmlkICE9PSBmaWx0ZXJlZFZhbHVlKSB7XG4gICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCd2YWx1ZScsIGxpc3QuaWQpO1xuICAgICAgb3B0aW9uLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxpc3QubmFtZSkpO1xuICBcbiAgICAgIGlmIChsaXN0LmlkID09PSBjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMucHVzaChvcHRpb24pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvcHRpb25zO1xufVxuXG5jb25zdCBnZXRDb25maWdTdHJpbmcgPSAoY29uZmlnOiBTbGFDb25maWd1cmF0aW9uLCB3aXRoUm93RGl2OiBib29sZWFuID0gdHJ1ZSk6IHN0cmluZyA9PiBcbiAgYCR7d2l0aFJvd0RpdiA/ICc8ZGl2IGNsYXNzPVwicm93IGNsaWNrYWJsZVwiPicgOiAnJ31cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wwXCI+JHtjb25maWcubmFtZX08L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wxXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY29uZGl0aW9uLXR5cGVcIj5TdGFydCB3aGVuIGNhcmQgaXMgaW4gbGlzdDwvc3Bhbj5cbiAgICAgICAgPGJyPiR7Y29sdW1uSWRUb05hbWUoY29uZmlnLnN0YXJ0Q29uZGl0aW9uLmlkKX1cbiAgICAgICAgPGJyPjxzcGFuIGNsYXNzPVwiY29uZGl0aW9uLXR5cGVcIj5FbmRzIHdoZW4gY2FyZCBpcyBpbiBsaXN0PC9zcGFuPlxuICAgICAgICA8YnI+JHtjb2x1bW5JZFRvTmFtZShjb25maWcuZW5kQ29uZGl0aW9uLmlkKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNvbDJcIj5EdXJhdGlvbjogJHtnZXRIdW1hblJlYWRhYmxlVGltZShjb25maWcudGltZSl9PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sM1wiPjxidXR0b24gaWQ9XCJkZWxldGUtYnRuXCIgY2xhc3M9XCJtb2QtYm90dG9tXCI+RGVsZXRlPC9idXR0b24+PC9kaXY+XG4gICR7d2l0aFJvd0RpdiA/ICc8L2Rpdj4nIDogJyd9YDtcbiAgXG5jb25zdCByZW5kZXJDb25maWcgPSAoY29uZmlnOiBTbGFDb25maWd1cmF0aW9uLCB3aXRoUm93RGl2OiBib29sZWFuID0gdHJ1ZSk6IE5vZGUgPT4gXG4gIHN0cmluZ1RvTm9kZShnZXRDb25maWdTdHJpbmcoY29uZmlnLCB3aXRoUm93RGl2KSk7XG5cbmNvbnN0IGdldENvbmZpZ0VkaXRNb2RlID0gKGNvbmZpZz86IFNsYUNvbmZpZ3VyYXRpb24pOiBzdHJpbmcgPT4ge1xuICBjb25zdCBkb21TdHJpbmcgPSBgXG4gICAgPGRpdiBjbGFzcz1cImNvbDBcIj5cbiAgICAgIDxpbnB1dCBjbGFzcz1cIm5hbWUtaW5wdXRcIiB2YWx1ZT0ke2NvbmZpZyA/IGBcIiR7Y29uZmlnLm5hbWV9XCJgIDogXCJTTEEgTmFtZVwifT48L2lucHV0PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjb2wxXCI+XG4gICAgICA8c3BhbiBjbGFzcz1cImNvbmRpdGlvbi10eXBlXCI+U3RhcnQgd2hlbiBjYXJkIGlzIGluIGxpc3Q8L3NwYW4+XG4gICAgICA8YnI+PHNlbGVjdCBjbGFzcz1cInN0YXJ0LXNlbGVjdFwiPjwvc2VsZWN0PlxuICAgICAgPGJyPjxzcGFuIGNsYXNzPVwiY29uZGl0aW9uLXR5cGVcIj5FbmQgd2hlbiBjYXJkIGlzIGluIGxpc3Q8L3NwYW4+XG4gICAgICA8YnI+PHNlbGVjdCBjbGFzcz1cImVuZC1zZWxlY3RcIj48L3NlbGVjdD5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY29sMlwiPlxuICAgICAgPGlucHV0IGNsYXNzPVwiaG91cnMtaW5wdXRcIiB0eXBlPVwibnVtYmVyXCIgbWluPVwiMFwiIG9uaW5wdXQ9XCJ2YWxpZGl0eS52YWxpZHx8KHZhbHVlPScnKVwiIHZhbHVlPVwiJHtjb25maWcgPyBNYXRoLmZsb29yKGNvbmZpZy50aW1lIC8gNjApIDogMX1cIj48L2lucHV0PjxzcGFuPmg8L3NwYW4+XG4gICAgICA8aW5wdXQgY2xhc3M9XCJtaW51dGVzLWlucHV0XCIgdHlwZT1cIm51bWJlclwiIG1pbj1cIjBcIiBvbmlucHV0PVwidmFsaWRpdHkudmFsaWR8fCh2YWx1ZT0nJylcIiB2YWx1ZT1cIiR7Y29uZmlnID8gY29uZmlnLnRpbWUgLSBNYXRoLmZsb29yKGNvbmZpZy50aW1lIC8gNjApICogNjAgOiAzMH1cIj48L2lucHV0PjxzcGFuPm1pbjwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY29sM1wiPlxuICAgICAgICA8YnV0dG9uIGlkPVwic2F2ZS1idG5cIiBjbGFzcz1cIm1vZC1wcmltYXJ5IG1vZC1ib3R0b21cIj5TYXZlPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gaWQ9XCJjYW5jZWwtYnRuXCIgY2xhc3M9XCJtb2QtYm90dG9tXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgPC9kaXY+YDtcblxuICByZXR1cm4gZG9tU3RyaW5nO1xufVxuXG5jb25zdCByZW5kZXJBZGRSb3cgPSAod2l0aFJvd0RpdjogYm9vbGVhbiA9IHRydWUpOiBOb2RlID0+IFxuICBzdHJpbmdUb05vZGUoZ2V0QWRkUm93U3RyaW5nKHdpdGhSb3dEaXYpKTtcblxuY29uc3QgZ2V0QWRkUm93U3RyaW5nID0gKHdpdGhSb3dEaXY6IGJvb2xlYW4gPSB0cnVlKTogc3RyaW5nID0+XG4gIGAke3dpdGhSb3dEaXYgPyAnPGRpdiBjbGFzcz1cInJvdyBjbGlja2FibGVcIj4nIDogJyd9XG4gIDxkaXYgY2xhc3M9XCJhZGQtcm93XCI+XG4gIEFkZCBTTEFcbiAgPC9kaXY+XG4gICR7d2l0aFJvd0RpdiA/ICc8L2Rpdj4nIDogJyd9YDtcblxuYXN5bmMgZnVuY3Rpb24gb25TYXZlKGU6IEV2ZW50KSB7XG4gIGNvbnN0IHJvd0RpdiA9IHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICBjb25zdCBpbmRleCA9IFsuLi5yb3dEaXYucGFyZW50RWxlbWVudC5jaGlsZHJlbl0uaW5kZXhPZihyb3dEaXYpO1xuXG4gIGNvbnN0IHN0YXJ0ID0gcm93RGl2LnF1ZXJ5U2VsZWN0b3IoU1RBUlRfU0VMRUNUKS5zZWxlY3RlZE9wdGlvbnNbMF0udmFsdWU7XG4gIGNvbnN0IGVuZCA9IHJvd0Rpdi5xdWVyeVNlbGVjdG9yKEVORF9TRUxFQ1QpLnNlbGVjdGVkT3B0aW9uc1swXS52YWx1ZTtcbiAgY29uc3QgaG91cnMgPSByb3dEaXYucXVlcnlTZWxlY3RvcihIT1VSU19JTlBVVCkudmFsdWUgfHwgMDtcbiAgY29uc3QgbWludXRlcyA9IHJvd0Rpdi5xdWVyeVNlbGVjdG9yKE1JTlVURVNfSU5QVVQpLnZhbHVlIHx8IDA7XG4gIGNvbnN0IG5hbWUgPSByb3dEaXYucXVlcnlTZWxlY3RvcihOQU1FX0lOUFVUKS52YWx1ZSB8fCAnJztcblxuICBjb25zdCB0aW1lID0gcGFyc2VJbnQoaG91cnMsIDEwKSAqIDYwICsgcGFyc2VJbnQobWludXRlcywgMTApO1xuXG4gIGNvbnN0IGNvbmZpZ3MgPSBhd2FpdCBnZXRDb25maWd1cmF0aW9ucyh0KSB8fCBbXTtcblxuICBsZXQgbmV3Um93ID0gZmFsc2U7XG4gIGlmICggaW5kZXggPiBjb25maWdzLmxlbmd0aCAtIDEpIHtcbiAgICBuZXdSb3cgPSB0cnVlO1xuICB9XG5cbiAgaWYgKG5ld1Jvdykge1xuICAgIGNvbnN0IHJvdyA9IHtcbiAgICAgIGlkOiAnMScsXG4gICAgICBzdGFydENvbmRpdGlvbjoge1xuICAgICAgICB0eXBlOiBDb25kaXRpb24uQ29sdW1uTmFtZSxcbiAgICAgICAgaWQ6IHN0YXJ0XG4gICAgICB9LFxuICAgICAgZW5kQ29uZGl0aW9uOiB7XG4gICAgICAgIHR5cGU6IENvbmRpdGlvbi5Db2x1bW5OYW1lLFxuICAgICAgICBpZDogZW5kLFxuICAgICAgfSxcbiAgICAgIHRpbWUsXG4gICAgICBuYW1lLFxuICAgIH07XG4gICAgY29uZmlncy5wdXNoKHJvdyk7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnc1tpbmRleF0uc3RhcnRDb25kaXRpb24uaWQgPSBzdGFydDtcbiAgICBjb25maWdzW2luZGV4XS5lbmRDb25kaXRpb24uaWQgPSBlbmQ7XG4gICAgY29uZmlnc1tpbmRleF0udGltZSA9IHRpbWU7XG4gICAgY29uZmlnc1tpbmRleF0ubmFtZSA9IG5hbWU7XG4gIH1cblxuICBhd2FpdCBzZXRDb25maWd1cmF0aW9ucyh0LCBjb25maWdzKTtcblxuICAvLyBUT0RPOiBuZWVkIHRvIGxvb3AgdGhyb3VnaCBTTEFzIGFuZCByZXNldCBvbmVzIHRoYXQgaGF2ZSBjaGFuZ2VkXG59XG5cbmFzeW5jIGZ1bmN0aW9uIG9uQ2FuY2VsKGU6IEV2ZW50KSB7XG4gIGNvbnN0IHJvd0RpdiA9IHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICBjb25zdCBpbmRleCA9IFsuLi5yb3dEaXYucGFyZW50RWxlbWVudC5jaGlsZHJlbl0uaW5kZXhPZihyb3dEaXYpO1xuICBjb25zdCBjb25maWdzID0gYXdhaXQgZ2V0Q29uZmlndXJhdGlvbnModCkgfHwgW107XG5cbiAgcm93RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2VkaXRpbmcnKTtcblxuICBpZiAoIGluZGV4ID4gY29uZmlncy5sZW5ndGggLSAxKSB7XG4gICAgcm93RGl2LmlubmVySFRNTCA9IGdldEFkZFJvd1N0cmluZyhmYWxzZSk7XG4gICAgXG4gIH0gZWxzZSB7XG4gICAgcm93RGl2LmlubmVySFRNTCA9IGdldENvbmZpZ1N0cmluZyhjb25maWdzW2luZGV4XSwgZmFsc2UpO1xuICB9XG5cbiAgLy8gVW5mcmVlemUgYWxsIHJvd3MgYW5kIGRlbGV0ZSBidG5zXG4gIGNvbnN0IGFsbFJvd3MgPSByb3dEaXYucGFyZW50RWxlbWVudC5jaGlsZHJlbjtcbiAgW10uZm9yRWFjaC5jYWxsKGFsbFJvd3MsIGZ1bmN0aW9uKHJvdykgeyBcbiAgICByb3cuY2xhc3NMaXN0LmFkZCgnY2xpY2thYmxlJyk7XG4gIH0pO1xuICBjb25zdCBhbGxEZWxldGVCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2RlbGV0ZS1idG4nKTtcbiAgW10uZm9yRWFjaC5jYWxsKGFsbERlbGV0ZUJ0bnMsIGZ1bmN0aW9uKGJ0bikge1xuICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gb25EZWxldGUoZTogRXZlbnQpIHtcbiAgY29uc3Qgcm93RGl2ID0gdGhpcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gIGNvbnN0IGluZGV4ID0gWy4uLnJvd0Rpdi5wYXJlbnRFbGVtZW50LmNoaWxkcmVuXS5pbmRleE9mKHJvd0Rpdik7XG4gIGNvbnN0IGNvbmZpZ3MgPSBhd2FpdCBnZXRDb25maWd1cmF0aW9ucyh0KSB8fCBbXTtcbiAgY29uZmlncy5zcGxpY2UoaW5kZXgpO1xuICBhd2FpdCBzZXRDb25maWd1cmF0aW9ucyh0LCBjb25maWdzKTtcbn1cblxuZnVuY3Rpb24gb25TZWxlY3RPcHRpb25DaGFuZ2UoaXNTdGFydDogYm9vbGVhbikge1xuICByZXR1cm4gZnVuY3Rpb24gZm4oZTogRXZlbnQpIHtcbiAgICBjb25zdCByb3dEaXYgPSB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCBzZWxlY3QgPSBpc1N0YXJ0ID8gcm93RGl2LnF1ZXJ5U2VsZWN0b3IoRU5EX1NFTEVDVCkgOiByb3dEaXYucXVlcnlTZWxlY3RvcihTVEFSVF9TRUxFQ1QpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBjcmVhdGVPcHRpb25zKHNlbGVjdC5zZWxlY3RlZE9wdGlvbnNbMF0udmFsdWUsIHRoaXMuc2VsZWN0ZWRPcHRpb25zWzBdLnZhbHVlKTtcbiAgICBzZWxlY3QuaW5uZXJIVE1MID0gdW5kZWZpbmVkO1xuICAgIG9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgfSlcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBvblJvd0NsaWNrKGU6IEV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2NsaWNrYWJsZScpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRnJlZXplIGFsbCBvdGhlciByb3dzIGFuZCBkZWxldGUgYnRuc1xuICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2VkaXRpbmcnKTtcbiAgY29uc3QgYWxsUm93cyA9IHRoaXMucGFyZW50RWxlbWVudC5jaGlsZHJlbjtcbiAgW10uZm9yRWFjaC5jYWxsKGFsbFJvd3MsIGZ1bmN0aW9uKHJvdykgeyBcbiAgICByb3cuY2xhc3NMaXN0LnJlbW92ZSgnY2xpY2thYmxlJyk7XG4gIH0pO1xuICBjb25zdCBhbGxEZWxldGVCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2RlbGV0ZS1idG4nKTtcbiAgW10uZm9yRWFjaC5jYWxsKGFsbERlbGV0ZUJ0bnMsIGZ1bmN0aW9uKGJ0bikge1xuICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gIH0pO1xuXG4gIGNvbnN0IGluZGV4ID0gWy4uLnRoaXMucGFyZW50RWxlbWVudC5jaGlsZHJlbl0uaW5kZXhPZih0aGlzKTtcbiAgY29uc3QgY29uZmlnczogU2xhQ29uZmlndXJhdGlvbltdID0gYXdhaXQgZ2V0Q29uZmlndXJhdGlvbnModCkgfHwgW107XG5cbiAgbGV0IG5ld1JvdyA9IGZhbHNlO1xuICBpZiAoIGluZGV4ID4gY29uZmlncy5sZW5ndGggLSAxKSB7XG4gICAgbmV3Um93ID0gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IGNvbmZpZyA9IG5ld1JvdyA/IHVuZGVmaW5lZCA6IGNvbmZpZ3NbaW5kZXhdO1xuXG4gIHRoaXMuaW5uZXJIVE1MID0gZ2V0Q29uZmlnRWRpdE1vZGUoY29uZmlnKTtcblxuICBjb25zdCBzdGFydE9wdGlvbnMgPSBuZXdSb3cgPyBjcmVhdGVPcHRpb25zRm9yTmV3Um93KHRydWUpIDogY3JlYXRlT3B0aW9ucyhjb25maWcuc3RhcnRDb25kaXRpb24uaWQsIGNvbmZpZy5lbmRDb25kaXRpb24uaWQpO1xuICBjb25zdCBlbmRPcHRpb25zID0gbmV3Um93ID8gY3JlYXRlT3B0aW9uc0Zvck5ld1JvdyhmYWxzZSkgOiBjcmVhdGVPcHRpb25zKGNvbmZpZy5lbmRDb25kaXRpb24uaWQsIGNvbmZpZy5zdGFydENvbmRpdGlvbi5pZCk7XG5cbiAgY29uc3Qgc3RhcnRTZWxlY3QgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoU1RBUlRfU0VMRUNUKTtcbiAgY29uc3QgZW5kU2VsZWN0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKEVORF9TRUxFQ1QpXG5cbiAgLy8gSWYgY2hhbmdlIG9wdGlvbiwgbmVlZCB0byBtYWtlIHN1cmUgdGhhdCB0aGUgb3B0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBvdGhlciBzZWxlY3RcbiAgc3RhcnRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBvblNlbGVjdE9wdGlvbkNoYW5nZSh0cnVlKSk7XG4gIGVuZFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIG9uU2VsZWN0T3B0aW9uQ2hhbmdlKGZhbHNlKSk7XG4gIHRoaXMucXVlcnlTZWxlY3RvcignI3NhdmUtYnRuJykub25jbGljayA9IG9uU2F2ZTtcbiAgdGhpcy5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsLWJ0bicpLm9uY2xpY2sgPSBvbkNhbmNlbDtcblxuICBzdGFydE9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgIHN0YXJ0U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gIH0pXG4gIGVuZE9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgIGVuZFNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICB9KTtcbn1cblxudC5yZW5kZXIoYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsaXN0cyA9IGF3YWl0IGdldExpc3RzKHQpO1xuXG4gIC8vIFRPRE86IElmIG9ubHkgb25lIG9yIDAgbGlzdHMsIGNhbid0IGRvIGFueXRoaW5nLlxuXG4gIC8vIFRPRE86IElmIG5vIGF1dGgsIHNob3cgYXV0aCBzY3JlZW5cblxuICBjb25zdCBjb25maWdzID0gYXdhaXQgZ2V0Q29uZmlndXJhdGlvbnModCkgfHwgW107XG5cbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpO1xuXG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICBjb25maWdzLmZvckVhY2goKGNvbmZpZykgPT4ge1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJDb25maWcoY29uZmlnKSk7XG4gIH0pO1xuXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJBZGRSb3coKSk7XG5cbiAgY29uc3Qgcm93cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb3cnKSBhcyBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PjtcbiAgQXJyYXkuZnJvbShyb3dzKS5mb3JFYWNoKHJvdyA9PiByb3cub25jbGljayA9IG9uUm93Q2xpY2spO1xuXG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZGVsZXRlLWJ0bicpIGFzIE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuICBBcnJheS5mcm9tKGRlbGV0ZUJ1dHRvbnMpLmZvckVhY2goYnRuID0+IGJ0bi5vbmNsaWNrID0gb25EZWxldGUpO1xuICBcbiAgdC5zaXplVG8oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKSk7XG59KTtcbiAgIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7OztBQUdBOztBQUVBOztBQUVBOztBQUVBO0FBRUE7QUFHQTtBQUNBOztBQUVBOzs7Ozs7Ozs7QUFTQTtBQUNBOzs7OztBQUtBO0FBRUE7QUFDQTtBQUVBO0FBR0E7Ozs7QUFLQTtBQUVBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTs7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/settings.ts\n");

/***/ }),

/***/ "./src/trello-util.ts":
/*!****************************!*\
  !*** ./src/trello-util.ts ***!
  \****************************/
/*! exports provided: Condition, CardActionType, getConfigurations, setConfigurations, getSlaData, setSlaData, getCardActions, getLists */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Condition\", function() { return Condition; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CardActionType\", function() { return CardActionType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getConfigurations\", function() { return getConfigurations; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setConfigurations\", function() { return setConfigurations; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSlaData\", function() { return getSlaData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setSlaData\", function() { return setSlaData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCardActions\", function() { return getCardActions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLists\", function() { return getLists; });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst key = 'bd1e7e486269d148ecd1be71ad5a3f1a';\nconst token = ''; // TODO use auth\n// Right now we only provide being in a column as starting the SLA\nvar Condition;\n(function (Condition) {\n    Condition[\"ColumnName\"] = \"COLUMN_NAME\";\n})(Condition || (Condition = {}));\nvar CardActionType;\n(function (CardActionType) {\n    CardActionType[\"createCard\"] = \"createCard\";\n    CardActionType[\"updateCard\"] = \"updateCard\";\n})(CardActionType || (CardActionType = {}));\n// TODO: get can technically return nothing - is it null, undefined?\nconst getConfigurations = (t) => t.get('board', 'shared', 'config');\nconst setConfigurations = (t, config) => t.set('board', 'shared', 'config', config);\nconst getSlaData = (t) => t.get('card', 'shared', 'slaData');\nconst setSlaData = (t, slaData) => t.set('card', 'shared', 'slaData', slaData);\nconst getCardActions = (t) => __awaiter(void 0, void 0, void 0, function* () {\n    const { card: cardId } = t.getContext();\n    const url = `https://api.trello.com/1/cards/${cardId}/actions?filter=updateCard:idList,createCard&key=${key}&token=${token}`;\n    return axios.get(url).then(response => response.data).catch((e) => {\n        console.log('Failed to get card actions', e);\n    });\n});\nconst getLists = (t) => __awaiter(void 0, void 0, void 0, function* () {\n    const { board: boardId } = t.getContext();\n    const url = `https://api.trello.com/1/boards/${boardId}/lists?cards=none&filter=open&key=${key}&token=${token}`;\n    return axios.get(url).then(response => response.data).catch((e) => {\n        console.log('Failed to get lists', e);\n    });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdHJlbGxvLXV0aWwudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3RyZWxsby11dGlsLnRzP2JhYjciXSwic291cmNlc0NvbnRlbnQiOlsiZGVjbGFyZSBjb25zdCBheGlvczogYW55O1xuXG5jb25zdCBrZXkgPSAnYmQxZTdlNDg2MjY5ZDE0OGVjZDFiZTcxYWQ1YTNmMWEnO1xuY29uc3QgdG9rZW4gPSAnJzsgLy8gVE9ETyB1c2UgYXV0aFxuXG4vLyBSaWdodCBub3cgd2Ugb25seSBwcm92aWRlIGJlaW5nIGluIGEgY29sdW1uIGFzIHN0YXJ0aW5nIHRoZSBTTEFcbmV4cG9ydCBlbnVtIENvbmRpdGlvbiB7XG4gICAgQ29sdW1uTmFtZSA9IFwiQ09MVU1OX05BTUVcIixcbn1cblxuZXhwb3J0IGVudW0gQ2FyZEFjdGlvblR5cGUgeyBcbiAgICBjcmVhdGVDYXJkID0gXCJjcmVhdGVDYXJkXCIsXG4gICAgdXBkYXRlQ2FyZCA9IFwidXBkYXRlQ2FyZFwiXG59XG5cbmV4cG9ydCB0eXBlIFNsYUNvbmRpdGlvbiA9IHtcbiAgICB0eXBlOiBDb25kaXRpb247XG4gICAgaWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgU2xhQ29uZmlndXJhdGlvbiA9IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBzdGFydENvbmRpdGlvbjogU2xhQ29uZGl0aW9uO1xuICAgIGVuZENvbmRpdGlvbjogU2xhQ29uZGl0aW9uO1xuICAgIHRpbWU6IG51bWJlcjsgLy8gTWludXRlc1xufVxuXG5leHBvcnQgdHlwZSBTbGFEYXRhID0ge1xuICAgIHN0YXJ0VGltZT86IG51bWJlcjsgLy8gVW5peCB0aW1lc3RhbXAgbWlsbGlzZWNvbmRzLiBPbmx5IGV4aXN0cyBpZiBTTEEgaGFzIHN0YXJ0ZWRcbiAgICBlbmRUaW1lPzogbnVtYmVyOyAvLyBVbml4IHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHMuIE9ubHkgZXhpc3RzIGlmIFNMQSBoYXMgZW5kZWRcbn1cblxuZXhwb3J0IHR5cGUgU2xhRGF0YU1hcCA9IHtcbiAgICBbaWQ6IG51bWJlcl06IFNsYURhdGE7XG59XG5cbmV4cG9ydCB0eXBlIENhcmRBY3Rpb24gPSBDcmVhdGVDYXJkQWN0aW9uIHwgVXBkYXRlQ2FyZEFjdGlvbjtcblxuZXhwb3J0IHR5cGUgVXBkYXRlQ2FyZEFjdGlvbiA9IHtcbiAgICBkYXRhOiB7XG4gICAgICAgIGxpc3RBZnRlcjoge2lkOiBzdHJpbmd9O1xuICAgICAgICBsaXN0QmVmb3JlOiB7aWQ6IHN0cmluZ307XG4gICAgfTtcbiAgICB0eXBlOiB0eXBlb2YgQ2FyZEFjdGlvblR5cGUudXBkYXRlQ2FyZDtcbiAgICBkYXRlOiBzdHJpbmc7IC8vIGZvcm1hdCAyMDE5LTExLTI5VDIxOjA1OjI4LjUxMFpcbn1cblxuZXhwb3J0IHR5cGUgQ3JlYXRlQ2FyZEFjdGlvbiA9IHtcbiAgICBkYXRhOiB7XG4gICAgICAgIGxpc3Q6IHtpZDogc3RyaW5nfTtcbiAgICB9O1xuICAgIHR5cGU6IHR5cGVvZiBDYXJkQWN0aW9uVHlwZS5jcmVhdGVDYXJkO1xuICAgIGRhdGU6IHN0cmluZzsgLy8gZm9ybWF0IDIwMTktMTEtMjlUMjE6MDU6MjguNTEwWlxufVxuXG5leHBvcnQgdHlwZSBMaXN0ID0ge1xuICAgIGlkOiBzdHJpbmcsXG4gICAgbmFtZTogc3RyaW5nLFxufVxuXG4vLyBUT0RPOiBnZXQgY2FuIHRlY2huaWNhbGx5IHJldHVybiBub3RoaW5nIC0gaXMgaXQgbnVsbCwgdW5kZWZpbmVkP1xuZXhwb3J0IGNvbnN0IGdldENvbmZpZ3VyYXRpb25zID0gKHQpOiBQcm9taXNlPFNsYUNvbmZpZ3VyYXRpb25bXSB8IHZvaWQ+ID0+IHQuZ2V0KCdib2FyZCcsICdzaGFyZWQnLCAnY29uZmlnJyk7XG5leHBvcnQgY29uc3Qgc2V0Q29uZmlndXJhdGlvbnMgPSAodCwgY29uZmlnOiBTbGFDb25maWd1cmF0aW9uW10pOiB2b2lkID0+IHQuc2V0KCdib2FyZCcsICdzaGFyZWQnLCAnY29uZmlnJywgY29uZmlnKTtcbmV4cG9ydCBjb25zdCBnZXRTbGFEYXRhID0gKHQpOiBQcm9taXNlPFNsYURhdGFNYXAgfCB2b2lkPiA9PiB0LmdldCgnY2FyZCcsICdzaGFyZWQnLCAnc2xhRGF0YScpO1xuZXhwb3J0IGNvbnN0IHNldFNsYURhdGEgPSAodCwgc2xhRGF0YTogU2xhRGF0YU1hcCk6IHZvaWQgPT4gdC5zZXQoJ2NhcmQnLCAnc2hhcmVkJywgJ3NsYURhdGEnLCBzbGFEYXRhKTtcblxuZXhwb3J0IGNvbnN0IGdldENhcmRBY3Rpb25zID0gYXN5bmMgKHQpOiBQcm9taXNlPENhcmRBY3Rpb25bXT4gPT4ge1xuICAgIGNvbnN0IHsgY2FyZDogY2FyZElkIH0gPSB0LmdldENvbnRleHQoKTtcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkudHJlbGxvLmNvbS8xL2NhcmRzLyR7Y2FyZElkfS9hY3Rpb25zP2ZpbHRlcj11cGRhdGVDYXJkOmlkTGlzdCxjcmVhdGVDYXJkJmtleT0ke2tleX0mdG9rZW49JHt0b2tlbn1gO1xuICAgIHJldHVybiBheGlvcy5nZXQodXJsKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmRhdGEpLmNhdGNoKChlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGdldCBjYXJkIGFjdGlvbnMnLCBlKTtcbiAgICB9KTtcbiAgfTtcblxuZXhwb3J0IGNvbnN0IGdldExpc3RzID0gYXN5bmMgKHQpOiBQcm9taXNlPExpc3RbXT4gPT4ge1xuICAgIGNvbnN0IHsgYm9hcmQ6IGJvYXJkSWQgfSA9IHQuZ2V0Q29udGV4dCgpO1xuICAgIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS50cmVsbG8uY29tLzEvYm9hcmRzLyR7Ym9hcmRJZH0vbGlzdHM/Y2FyZHM9bm9uZSZmaWx0ZXI9b3BlbiZrZXk9JHtrZXl9JnRva2VuPSR7dG9rZW59YDtcbiAgICByZXR1cm4gYXhpb3MuZ2V0KHVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5kYXRhKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGdldCBsaXN0cycsIGUpO1xuICAgICAgfSk7XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFnREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/trello-util.ts\n");

/***/ }),

/***/ "./src/util.ts":
/*!*********************!*\
  !*** ./src/util.ts ***!
  \*********************/
/*! exports provided: getHumanReadableTime, getMinutesRemaining, getColor, getRunningSlas, getEndTime, getStartTime, getUpdatedConfigs, updateConfigs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getHumanReadableTime\", function() { return getHumanReadableTime; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getMinutesRemaining\", function() { return getMinutesRemaining; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getColor\", function() { return getColor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getRunningSlas\", function() { return getRunningSlas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getEndTime\", function() { return getEndTime; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getStartTime\", function() { return getStartTime; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUpdatedConfigs\", function() { return getUpdatedConfigs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateConfigs\", function() { return updateConfigs; });\n/* harmony import */ var _trello_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./trello-util */ \"./src/trello-util.ts\");\n\nconst getHumanReadableTime = (realMinutes) => {\n    const isNegative = realMinutes < 0;\n    const minutes = isNegative ? realMinutes * -1 : realMinutes;\n    const negativeSign = isNegative ? '-' : '';\n    const MINUTES = 'min';\n    const HOURS = 'h';\n    const DAYS = 'd';\n    if (minutes < 60) {\n        return `${negativeSign}${minutes}${MINUTES}`;\n    }\n    if (minutes < 1440) {\n        const hours = Math.floor(minutes / 60);\n        const hoursString = hours > 0 ? `${hours}${HOURS}` : '';\n        const remainingMinutes = minutes - 60 * hours;\n        const minutesString = remainingMinutes > 0 ? `${remainingMinutes}${MINUTES}` : '';\n        const spacer = hoursString && minutesString ? ' ' : '';\n        return `${negativeSign}${hoursString}${spacer}${minutesString}`;\n    }\n    const days = Math.floor(minutes / 1440);\n    const daysString = days > 0 ? `${days}${DAYS}` : '';\n    const remainingMinutes = minutes - days * 1440;\n    const remainingHours = Math.floor(remainingMinutes / 60);\n    const hoursString = remainingHours > 0 ? `${remainingHours}${HOURS}` : '';\n    const spacer = daysString && hoursString ? ' ' : '';\n    return `${negativeSign}${daysString}${spacer}${hoursString}`;\n};\nconst getMinutesRemaining = (startTime, endTime, config) => {\n    const minutesElapsed = Math.floor((endTime - startTime) / 1000 / 60);\n    const minutesRemaining = config.time - minutesElapsed;\n    return minutesRemaining;\n};\nconst getColor = (minutesRemaining, isComplete) => {\n    if (isComplete) {\n        return 'grey';\n    }\n    ;\n    if (minutesRemaining < 0) {\n        return 'red';\n    }\n    else if (minutesRemaining < 60) {\n        return 'yellow';\n    }\n    return 'green';\n};\nconst getRunningSlas = (data, configs, detailed) => {\n    const runningSlas = [];\n    const completeSlas = [];\n    configs.forEach((config) => {\n        if (data[config.id]) {\n            const { startTime, endTime } = data[config.id];\n            if (startTime && !endTime) {\n                const unix = moment().valueOf();\n                const minutesRemaining = getMinutesRemaining(startTime, unix, config);\n                const humanReadable = getHumanReadableTime(minutesRemaining);\n                runningSlas.push(Object.assign(Object.assign(Object.assign({ text: humanReadable, color: getColor(minutesRemaining, false) }, (detailed ? { title: config.name } : {})), (!detailed ? { icon: `${window.location}img/stopwatch.svg` } : {})), { refresh: 60 }));\n            }\n            if (startTime && endTime && detailed) {\n                const minutesRemaining = getMinutesRemaining(startTime, endTime, config);\n                const humanReadable = getHumanReadableTime(minutesRemaining);\n                completeSlas.push({\n                    text: humanReadable,\n                    color: getColor(minutesRemaining, true),\n                    title: config.name,\n                    refresh: 60\n                });\n            }\n        }\n    });\n    // We want the complete SLAs to come after the running ones\n    const allSlas = runningSlas.concat(completeSlas);\n    return allSlas;\n};\nconst getEndTime = (actions, endCondition, startTime) => {\n    let endTime = undefined;\n    actions.forEach((action) => {\n        if (action.type === _trello_util__WEBPACK_IMPORTED_MODULE_0__[\"CardActionType\"].updateCard) {\n            if (action.data.listAfter.id === endCondition.id &&\n                (!endTime || moment(action.date).valueOf() < endTime) &&\n                moment(action.date).valueOf() > startTime) {\n                endTime = moment(action.date).valueOf();\n            }\n        }\n    });\n    return endTime;\n};\nconst getStartTime = (actions, startCondition) => {\n    let startTime = undefined;\n    actions.forEach((action) => {\n        if (action.type === _trello_util__WEBPACK_IMPORTED_MODULE_0__[\"CardActionType\"].createCard && action.data.list.id === startCondition.id) {\n            startTime = moment(action.date).valueOf();\n        }\n        else if (action.type === _trello_util__WEBPACK_IMPORTED_MODULE_0__[\"CardActionType\"].updateCard &&\n            action.data.listAfter.id === startCondition.id &&\n            !startTime || (moment(action.date).valueOf() < startTime)) {\n            startTime = moment(action.date).valueOf();\n        }\n    });\n    return startTime;\n};\nconst getUpdatedConfigs = (actions, configs, slaMap) => {\n    const updatedSlaMap = slaMap;\n    let hasChanged = false;\n    configs.forEach(config => {\n        const { id, startCondition, endCondition } = config;\n        if (!updatedSlaMap[id]) {\n            updatedSlaMap[id] = {};\n        }\n        const { startTime = undefined, endTime = undefined } = updatedSlaMap[id];\n        const newStartTime = !startTime ? getStartTime(actions, startCondition) : undefined;\n        const startTimeExists = startTime ? startTime : newStartTime;\n        const newEndTime = startTimeExists && !endTime ? getEndTime(actions, endCondition, startTimeExists) : undefined;\n        if (newStartTime) {\n            hasChanged = true;\n            updatedSlaMap[id].startTime = newStartTime;\n        }\n        if (newEndTime) {\n            hasChanged = true;\n            updatedSlaMap[id].endTime = newEndTime;\n        }\n    });\n    return hasChanged ? updatedSlaMap : undefined;\n};\nconst updateConfigs = (t, configs, slaMap) => {\n    Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"getCardActions\"])(t).then((actions) => {\n        const updatedConfigs = getUpdatedConfigs(actions, configs, slaMap);\n        if (updatedConfigs) {\n            Object(_trello_util__WEBPACK_IMPORTED_MODULE_0__[\"setSlaData\"])(t, updatedConfigs);\n        }\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvdXRpbC50cz80OTU2Il0sInNvdXJjZXNDb250ZW50IjpbImRlY2xhcmUgY29uc3QgbW9tZW50OiBhbnk7XG5cbmltcG9ydCB7IHNldFNsYURhdGEsIFNsYURhdGFNYXAsIFNsYURhdGEsIFNsYUNvbmZpZ3VyYXRpb24sIGdldENhcmRBY3Rpb25zLCBDYXJkQWN0aW9uLCBDYXJkQWN0aW9uVHlwZSwgU2xhQ29uZGl0aW9uIH0gZnJvbSAnLi90cmVsbG8tdXRpbCc7XG5cbnR5cGUgQ2FyZEJhZGdlID0ge1xuICB0ZXh0OiBzdHJpbmc7XG4gIGNvbG9yOiBzdHJpbmc7XG4gIHJlZnJlc2g6IG51bWJlcjtcbiAgaWNvbj86IHN0cmluZztcbiAgdGl0bGU/OiBzdHJpbmc7XG59O1xuXG50eXBlIENhcmREZXRhaWxlZEJhZGdlID0ge1xuICB0aXRsZTogc3RyaW5nO1xuICBjb2xvcjogc3RyaW5nO1xuICB0ZXh0OiBzdHJpbmc7XG4gIGNhbGxiYWNrPzogKCkgPT4ge307XG59O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRIdW1hblJlYWRhYmxlVGltZSA9IChyZWFsTWludXRlczogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgY29uc3QgaXNOZWdhdGl2ZSA9IHJlYWxNaW51dGVzIDwgMDtcbiAgY29uc3QgbWludXRlcyA9IGlzTmVnYXRpdmUgPyByZWFsTWludXRlcyAqIC0xIDogcmVhbE1pbnV0ZXM7XG4gIGNvbnN0IG5lZ2F0aXZlU2lnbiA9IGlzTmVnYXRpdmUgPyAnLScgOiAnJztcblxuICBjb25zdCBNSU5VVEVTID0gJ21pbic7XG4gIGNvbnN0IEhPVVJTID0gJ2gnO1xuICBjb25zdCBEQVlTID0gJ2QnO1xuXG4gIGlmIChtaW51dGVzIDwgNjApIHtcbiAgICByZXR1cm4gYCR7bmVnYXRpdmVTaWdufSR7bWludXRlc30ke01JTlVURVN9YDtcbiAgfSBpZiAobWludXRlcyA8IDE0NDApIHtcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IobWludXRlcyAvIDYwKTtcbiAgICBjb25zdCBob3Vyc1N0cmluZyA9IGhvdXJzID4gMCA/IGAke2hvdXJzfSR7SE9VUlN9YCA6ICcnO1xuICAgIGNvbnN0IHJlbWFpbmluZ01pbnV0ZXMgPSBtaW51dGVzIC0gNjAgKiBob3VycztcbiAgICBjb25zdCBtaW51dGVzU3RyaW5nID0gcmVtYWluaW5nTWludXRlcyA+IDAgPyBgJHtyZW1haW5pbmdNaW51dGVzfSR7TUlOVVRFU31gIDogJyc7XG4gICAgY29uc3Qgc3BhY2VyID0gaG91cnNTdHJpbmcgJiYgbWludXRlc1N0cmluZyA/ICcgJyA6ICcnO1xuICAgIHJldHVybiBgJHtuZWdhdGl2ZVNpZ259JHtob3Vyc1N0cmluZ30ke3NwYWNlcn0ke21pbnV0ZXNTdHJpbmd9YDtcbiAgfSBcbiAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IobWludXRlcyAvIDE0NDApO1xuICBjb25zdCBkYXlzU3RyaW5nID0gZGF5cyA+IDAgPyBgJHtkYXlzfSR7REFZU31gIDogJyc7XG4gIGNvbnN0IHJlbWFpbmluZ01pbnV0ZXMgPSBtaW51dGVzIC0gZGF5cyAqIDE0NDA7XG4gIGNvbnN0IHJlbWFpbmluZ0hvdXJzID0gTWF0aC5mbG9vcihyZW1haW5pbmdNaW51dGVzIC8gNjApOyBcbiAgY29uc3QgaG91cnNTdHJpbmcgPSByZW1haW5pbmdIb3VycyA+IDAgPyBgJHtyZW1haW5pbmdIb3Vyc30ke0hPVVJTfWAgOiAnJztcbiAgY29uc3Qgc3BhY2VyID0gZGF5c1N0cmluZyAmJiBob3Vyc1N0cmluZyA/ICcgJyA6ICcnO1xuICByZXR1cm4gYCR7bmVnYXRpdmVTaWdufSR7ZGF5c1N0cmluZ30ke3NwYWNlcn0ke2hvdXJzU3RyaW5nfWA7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0TWludXRlc1JlbWFpbmluZyA9IChzdGFydFRpbWU6IG51bWJlciwgZW5kVGltZTogbnVtYmVyLCBjb25maWc6IFNsYUNvbmZpZ3VyYXRpb24pOiBudW1iZXIgPT4ge1xuICBjb25zdCBtaW51dGVzRWxhcHNlZCA9IE1hdGguZmxvb3IoKGVuZFRpbWUgLSBzdGFydFRpbWUpIC8gMTAwMCAvIDYwKTtcbiAgY29uc3QgbWludXRlc1JlbWFpbmluZyA9IGNvbmZpZy50aW1lIC0gbWludXRlc0VsYXBzZWQ7XG4gIHJldHVybiBtaW51dGVzUmVtYWluaW5nO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldENvbG9yID0gKG1pbnV0ZXNSZW1haW5pbmc6IG51bWJlciwgaXNDb21wbGV0ZTogYm9vbGVhbik6IHN0cmluZyA9PiB7XG4gIGlmIChpc0NvbXBsZXRlKSB7XG4gICAgcmV0dXJuICdncmV5JztcbiAgfTtcblxuICBpZiAobWludXRlc1JlbWFpbmluZyA8IDApIHtcbiAgICByZXR1cm4gJ3JlZCc7XG4gIH0gZWxzZSBpZiAobWludXRlc1JlbWFpbmluZyA8IDYwKSB7XG4gICAgcmV0dXJuICd5ZWxsb3cnXG4gIH1cbiAgcmV0dXJuICdncmVlbic7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UnVubmluZ1NsYXMgPSAoZGF0YTogU2xhRGF0YU1hcCwgY29uZmlnczogU2xhQ29uZmlndXJhdGlvbltdLCBkZXRhaWxlZDogYm9vbGVhbik6IENhcmRCYWRnZVtdIHwgQ2FyZERldGFpbGVkQmFkZ2VbXSA9PiB7XG4gIGNvbnN0IHJ1bm5pbmdTbGFzID0gW107XG4gIGNvbnN0IGNvbXBsZXRlU2xhcyA9IFtdO1xuICBcbiAgY29uZmlncy5mb3JFYWNoKChjb25maWcpID0+IHtcbiAgICBpZiAoZGF0YVtjb25maWcuaWRdKSB7XG4gICAgICBjb25zdCB7IHN0YXJ0VGltZSwgZW5kVGltZSB9ID0gZGF0YVtjb25maWcuaWRdO1xuICAgICAgaWYgKHN0YXJ0VGltZSAmJiAhZW5kVGltZSkge1xuICAgICAgICBjb25zdCB1bml4ID0gbW9tZW50KCkudmFsdWVPZigpO1xuICAgICAgICBjb25zdCBtaW51dGVzUmVtYWluaW5nID0gZ2V0TWludXRlc1JlbWFpbmluZyhzdGFydFRpbWUsIHVuaXgsIGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IGh1bWFuUmVhZGFibGUgPSBnZXRIdW1hblJlYWRhYmxlVGltZShtaW51dGVzUmVtYWluaW5nKTtcbiAgICAgICAgcnVubmluZ1NsYXMucHVzaCh7XG4gICAgICAgICAgdGV4dDogaHVtYW5SZWFkYWJsZSxcbiAgICAgICAgICBjb2xvcjogZ2V0Q29sb3IobWludXRlc1JlbWFpbmluZywgZmFsc2UpLFxuICAgICAgICAgIC4uLihkZXRhaWxlZCA/IHsgdGl0bGU6IGNvbmZpZy5uYW1lIH0gOiB7fSksXG4gICAgICAgICAgLi4uKCFkZXRhaWxlZCA/IHtpY29uOiBgJHt3aW5kb3cubG9jYXRpb259aW1nL3N0b3B3YXRjaC5zdmdgfSA6IHt9KSxcbiAgICAgICAgICByZWZyZXNoOiA2MCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGFydFRpbWUgJiYgZW5kVGltZSAmJiBkZXRhaWxlZCkge1xuICAgICAgICBjb25zdCBtaW51dGVzUmVtYWluaW5nID0gZ2V0TWludXRlc1JlbWFpbmluZyhzdGFydFRpbWUsIGVuZFRpbWUsIGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IGh1bWFuUmVhZGFibGUgPSBnZXRIdW1hblJlYWRhYmxlVGltZShtaW51dGVzUmVtYWluaW5nKTtcbiAgICAgICAgY29tcGxldGVTbGFzLnB1c2goe1xuICAgICAgICAgIHRleHQ6IGh1bWFuUmVhZGFibGUsXG4gICAgICAgICAgY29sb3I6IGdldENvbG9yKG1pbnV0ZXNSZW1haW5pbmcsIHRydWUpLFxuICAgICAgICAgIHRpdGxlOiBjb25maWcubmFtZSxcbiAgICAgICAgICByZWZyZXNoOiA2MFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgIH1cbiAgfSk7XG5cbiAgLy8gV2Ugd2FudCB0aGUgY29tcGxldGUgU0xBcyB0byBjb21lIGFmdGVyIHRoZSBydW5uaW5nIG9uZXNcbiAgY29uc3QgYWxsU2xhcyA9IHJ1bm5pbmdTbGFzLmNvbmNhdChjb21wbGV0ZVNsYXMpO1xuICAgIFxuICByZXR1cm4gYWxsU2xhcztcbn07XG5cblxuXG5leHBvcnQgY29uc3QgZ2V0RW5kVGltZSA9IChhY3Rpb25zOiBDYXJkQWN0aW9uW10sIGVuZENvbmRpdGlvbjogU2xhQ29uZGl0aW9uLCBzdGFydFRpbWU6IG51bWJlcik6IG51bWJlciB8IHZvaWQgPT4ge1xuICBsZXQgZW5kVGltZTogbnVtYmVyIHwgdm9pZCA9IHVuZGVmaW5lZDtcbiAgYWN0aW9ucy5mb3JFYWNoKChhY3Rpb24pID0+IHtcbiAgICBpZiAoYWN0aW9uLnR5cGUgPT09IENhcmRBY3Rpb25UeXBlLnVwZGF0ZUNhcmQpIHtcbiAgICAgIGlmIChhY3Rpb24uZGF0YS5saXN0QWZ0ZXIuaWQgPT09IGVuZENvbmRpdGlvbi5pZCAmJlxuICAgICAgICAoIWVuZFRpbWUgfHwgbW9tZW50KGFjdGlvbi5kYXRlKS52YWx1ZU9mKCkgPCBlbmRUaW1lKSAgJiYgXG4gICAgICAgIG1vbWVudChhY3Rpb24uZGF0ZSkudmFsdWVPZigpID4gc3RhcnRUaW1lKSB7XG4gICAgICAgICAgZW5kVGltZSA9IG1vbWVudChhY3Rpb24uZGF0ZSkudmFsdWVPZigpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGVuZFRpbWU7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U3RhcnRUaW1lID0gKGFjdGlvbnM6IENhcmRBY3Rpb25bXSwgc3RhcnRDb25kaXRpb246IFNsYUNvbmRpdGlvbik6IG51bWJlciB8IHZvaWQgPT4ge1xuICBsZXQgc3RhcnRUaW1lOiBudW1iZXIgfCB2b2lkID0gdW5kZWZpbmVkO1xuXG4gIGFjdGlvbnMuZm9yRWFjaCgoYWN0aW9uKSA9PiB7XG4gICAgaWYgKGFjdGlvbi50eXBlID09PSBDYXJkQWN0aW9uVHlwZS5jcmVhdGVDYXJkICYmIGFjdGlvbi5kYXRhLmxpc3QuaWQgPT09IHN0YXJ0Q29uZGl0aW9uLmlkKSB7XG4gICAgICBzdGFydFRpbWUgPSBtb21lbnQoYWN0aW9uLmRhdGUpLnZhbHVlT2YoKTtcbiAgICB9IGVsc2UgaWYgKGFjdGlvbi50eXBlID09PSBDYXJkQWN0aW9uVHlwZS51cGRhdGVDYXJkICYmXG4gICAgICBhY3Rpb24uZGF0YS5saXN0QWZ0ZXIuaWQgPT09IHN0YXJ0Q29uZGl0aW9uLmlkICYmXG4gICAgICAhc3RhcnRUaW1lIHx8IChtb21lbnQoYWN0aW9uLmRhdGUpLnZhbHVlT2YoKSA8IHN0YXJ0VGltZSkpIHtcbiAgICAgICAgc3RhcnRUaW1lID0gbW9tZW50KGFjdGlvbi5kYXRlKS52YWx1ZU9mKCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gc3RhcnRUaW1lO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFVwZGF0ZWRDb25maWdzID0gKGFjdGlvbnM6IENhcmRBY3Rpb25bXSwgY29uZmlnczogU2xhQ29uZmlndXJhdGlvbltdLCBzbGFNYXA6IFNsYURhdGFNYXApOiBTbGFEYXRhTWFwIHwgdm9pZCA9PiB7XG4gIGNvbnN0IHVwZGF0ZWRTbGFNYXAgPSBzbGFNYXA7XG4gIGxldCBoYXNDaGFuZ2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uZmlncy5mb3JFYWNoKGNvbmZpZyA9PiB7XG4gICAgY29uc3QgeyBpZCwgc3RhcnRDb25kaXRpb24sIGVuZENvbmRpdGlvbiB9ID0gY29uZmlnO1xuXG4gICAgaWYgKCF1cGRhdGVkU2xhTWFwW2lkXSkge1xuICAgICAgdXBkYXRlZFNsYU1hcFtpZF0gPSB7fTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHN0YXJ0VGltZSA9IHVuZGVmaW5lZCwgZW5kVGltZSA9IHVuZGVmaW5lZCB9ID0gdXBkYXRlZFNsYU1hcFtpZF07XG5cbiAgICBjb25zdCBuZXdTdGFydFRpbWUgPSAhc3RhcnRUaW1lID8gZ2V0U3RhcnRUaW1lKGFjdGlvbnMsIHN0YXJ0Q29uZGl0aW9uKSA6IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0IHN0YXJ0VGltZUV4aXN0czogbnVtYmVyIHwgdm9pZCA9ICBzdGFydFRpbWUgPyBzdGFydFRpbWUgOiBuZXdTdGFydFRpbWU7XG4gICAgY29uc3QgbmV3RW5kVGltZSA9IHN0YXJ0VGltZUV4aXN0cyAmJiAhZW5kVGltZSA/IGdldEVuZFRpbWUoYWN0aW9ucywgZW5kQ29uZGl0aW9uLCBzdGFydFRpbWVFeGlzdHMpIDogdW5kZWZpbmVkO1xuICAgIFxuICAgIGlmIChuZXdTdGFydFRpbWUpIHtcbiAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgdXBkYXRlZFNsYU1hcFtpZF0uc3RhcnRUaW1lID0gbmV3U3RhcnRUaW1lO1xuICAgIH1cblxuICAgIGlmIChuZXdFbmRUaW1lKSB7XG4gICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIHVwZGF0ZWRTbGFNYXBbaWRdLmVuZFRpbWUgPSBuZXdFbmRUaW1lO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGhhc0NoYW5nZWQgPyB1cGRhdGVkU2xhTWFwIDogdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUNvbmZpZ3MgPSAodDogYW55LCBjb25maWdzOiBTbGFDb25maWd1cmF0aW9uW10sIHNsYU1hcDogU2xhRGF0YU1hcCk6IHZvaWQgPT4ge1xuICBnZXRDYXJkQWN0aW9ucyh0KS50aGVuKChhY3Rpb25zKSA9PiB7XG4gICBjb25zdCB1cGRhdGVkQ29uZmlncyA9IGdldFVwZGF0ZWRDb25maWdzKGFjdGlvbnMsIGNvbmZpZ3MsIHNsYU1hcCk7XG4gICAgaWYgKHVwZGF0ZWRDb25maWdzKSB7XG4gICAgICBzZXRTbGFEYXRhKHQsIHVwZGF0ZWRDb25maWdzKTtcbiAgICB9XG4gIH0pO1xufTtcblxuXG4iXSwibWFwcGluZ3MiOiJBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/util.ts\n");

/***/ })

/******/ });